<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Combat Game</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <!-- Game Menu Overlay -->
    <div id="menu-overlay" class="hidden">
        <div id="menu-container">
            <div id="menu-header">
                <h2>Game Guide</h2>
                <button id="menu-close">&times;</button>
            </div>
            <div id="menu-tabs">
                <button class="menu-tab active" data-tab="skills">Skills</button>
                <button class="menu-tab" data-tab="bosses">Bosses</button>
                <button class="menu-tab" data-tab="mobs">Mobs</button>
            </div>
            <div id="menu-content">
                <!-- Skills Tab -->
                <div class="tab-content active" id="tab-skills">
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">RMB</span>
                            <span class="skill-name">Auto Attack</span>
                        </div>
                        <p class="skill-desc">Basic melee attack. Right-click an enemy to target them, then move into range to automatically attack.</p>
                        <div class="skill-stats">
                            <span>Damage: 25</span>
                            <span>Range: 2.5 tiles</span>
                            <span>Cooldown: 1.5s</span>
                        </div>
                    </div>
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">Q</span>
                            <span class="skill-name">Cleave</span>
                        </div>
                        <p class="skill-desc">Hold to aim a cone at your cursor, release to slash. Deals damage to all enemies in the cone area.</p>
                        <div class="skill-stats">
                            <span>Damage: 40 (AoE)</span>
                            <span>Cone: 90 degrees</span>
                            <span>Cooldown: 5s</span>
                        </div>
                    </div>
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">W</span>
                            <span class="skill-name">Blade Storm</span>
                        </div>
                        <p class="skill-desc">Hold to spin blades around you dealing AoE damage. Release to throw a spinning disk projectile. Auto-releases after 3 seconds.</p>
                        <div class="skill-stats">
                            <span>Spin: 15 dmg/tick</span>
                            <span>Disk: 25 dmg</span>
                            <span>Cooldown: 6s</span>
                        </div>
                    </div>
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">E</span>
                            <span class="skill-name">Parry</span>
                        </div>
                        <p class="skill-desc">Enter a defensive stance for 0.4s. If hit by an enemy attack, negate the damage and counter with a riposte. Perfect parry (first 0.15s) deals double damage and longer stun. Missing leaves you vulnerable.</p>
                        <div class="skill-stats">
                            <span>Riposte: 50 (100 perfect)</span>
                            <span>Stun: 0.5s (1s perfect)</span>
                            <span>Cooldown: 5s</span>
                        </div>
                    </div>
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">R</span>
                            <span class="skill-name">Charge</span>
                        </div>
                        <p class="skill-desc">Dash rapidly to your targeted enemy, stunning them on impact. Requires an active target (RMB).</p>
                        <div class="skill-stats">
                            <span>Stun: 1s</span>
                            <span>Cooldown: 8s</span>
                        </div>
                    </div>
                    <div class="skill-entry">
                        <div class="skill-header">
                            <span class="skill-key">1</span>
                            <span class="skill-name">Health Potion</span>
                        </div>
                        <p class="skill-desc">Instantly restore health.</p>
                        <div class="skill-stats">
                            <span>Heal: 30 HP</span>
                            <span>Cooldown: 10s</span>
                        </div>
                    </div>
                </div>

                <!-- Bosses Tab -->
                <div class="tab-content" id="tab-bosses">
                    <div class="boss-entry">
                        <div class="boss-header">
                            <span class="boss-name">The Slime King</span>
                            <span class="boss-hp">HP: 1600</span>
                        </div>
                        <p class="boss-desc">A massive slime that rules over its gelatinous minions. Uses multiple attack patterns and enters an enraged phase at 50% health.</p>
                        <div class="boss-abilities">
                            <h4>Phase 1 Abilities:</h4>
                            <div class="boss-ability">
                                <strong>Wave</strong> (20 dmg) - Sends a wave of slime in your direction. Watch the telegraph and sidestep.
                            </div>
                            <div class="boss-ability">
                                <strong>Slam</strong> (30 dmg) - Smashes the ground, leaving poison pools. Move away when the indicator appears!
                            </div>
                            <div class="boss-ability">
                                <strong>Shockwave</strong> (20 dmg + 2s stun) - If you stay close too long, releases a circular shockwave. Back off periodically or use Charge (R) to stun and interrupt!
                            </div>
                            <div class="boss-ability">
                                <strong>Bounce</strong> (20 dmg) - If you're far away, bounces toward you multiple times. Stay mobile!
                            </div>
                            <h4>Phase 2 (50% HP):</h4>
                            <div class="boss-ability">
                                <strong>Portal Dash</strong> (40 dmg) - Boss vanishes and dashes across the arena 3 times through portals. Avoid the 4-wide danger zones!
                            </div>
                            <div class="boss-ability">
                                <strong>Cocoon Spawn</strong> - 4 cocoons (35 HP each) spawn during portal dashes. Kill them before they hatch into Greater Slimes!
                            </div>
                            <div class="boss-ability">
                                <strong>Laser Hazards</strong> (35 dmg) - Environmental lasers periodically sweep across rows/columns after Phase 2 begins.
                            </div>
                        </div>
                        <div class="boss-tips">
                            <h4>Tips:</h4>
                            <ul>
                                <li>Use Blade Storm to kill cocoons quickly during portal dashes</li>
                                <li>Don't stand still - keep moving to avoid lasers and boss attacks</li>
                                <li>Use Charge (R) to stun the boss and interrupt Shockwave if caught in melee range</li>
                                <li>Time your Parry (E) to block boss attacks - perfect parries deal massive counter-damage</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Mobs Tab -->
                <div class="tab-content" id="tab-mobs">
                    <div class="mob-entry">
                        <div class="mob-header">
                            <span class="mob-name">Slime</span>
                            <span class="mob-hp">HP: 200</span>
                        </div>
                        <p class="mob-desc">Basic slime enemies that hop around the arena. They become aggressive when you get too close or attack them.</p>
                        <div class="mob-stats">
                            <span>Damage: 2</span>
                            <span>Aggro Range: 4 tiles</span>
                        </div>
                        <div class="mob-behavior">
                            <h4>Behavior:</h4>
                            <ul>
                                <li>Idle slimes wander randomly until provoked</li>
                                <li>Attacking a slime will immediately aggro it</li>
                                <li>Boss fight slimes have infinite aggro range</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mob-entry">
                        <div class="mob-header">
                            <span class="mob-name">Greater Slime</span>
                            <span class="mob-hp">HP: 240</span>
                        </div>
                        <p class="mob-desc">A larger, more aggressive purple slime. Hits harder and spawns from cocoons during boss Phase 2.</p>
                        <div class="mob-stats">
                            <span>Damage: 5</span>
                            <span>Aggro Range: 5 tiles</span>
                        </div>
                        <div class="mob-behavior">
                            <h4>Behavior:</h4>
                            <ul>
                                <li>More aggressive than regular slimes</li>
                                <li>Hatches from cocoons if not destroyed in time</li>
                                <li>Immediately aggros on spawn during boss fight</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mob-entry">
                        <div class="mob-header">
                            <span class="mob-name">Cocoon</span>
                            <span class="mob-hp">HP: 35</span>
                        </div>
                        <p class="mob-desc">Pulsing egg-like structures that spawn during boss Phase 2. Destroy them before they hatch!</p>
                        <div class="mob-behavior">
                            <h4>Behavior:</h4>
                            <ul>
                                <li>Cannot move or attack</li>
                                <li>Spawns during boss portal dash phase</li>
                                <li>Hatches into a Greater Slime when dashes complete</li>
                                <li>Priority target - kill before they hatch!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div id="menu-footer">
                <span>Press <kbd>Esc</kbd> to close</span>
            </div>
        </div>
    </div>

    <div id="ui">
        <div id="controls-hint">
            <span>LMB: Move</span>
            <span>RMB: Target</span>
            <span>Tab: Next Target</span>
            <span>C: View</span>
        </div>
        <div id="ability-bar">
            <div class="ability" id="ability-rmb">
                <span class="key">RMB</span>
                <span class="name">Target</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-q">
                <span class="key">Q</span>
                <span class="name">Cleave</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-w">
                <span class="key">W</span>
                <span class="name">Bladestorm</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-e">
                <span class="key">E</span>
                <span class="name">Parry</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-r">
                <span class="key">R</span>
                <span class="name">Charge</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-1">
                <span class="key">1</span>
                <span class="name">Potion</span>
                <div class="cooldown-overlay"></div>
            </div>
        </div>
    </div>
    <script type="module" src="js/main.js"></script>
</body>
</html>
